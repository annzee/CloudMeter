<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=">
    <title>云服务评测</title>

    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/bootstrap-table.css">
    <link rel="stylesheet" href="css/bootstrap-select.min.css">
    <link rel="stylesheet" href="css/navbar.css">
    <style>
        .bootstrap-select {
            margin: 10px 20px;
        }

        .axis path,
        .axis line {
            fill: none;
            stroke: black;
            shape-rendering: crispEdges;
        }

        .axis text {
            font-family: sans-serif;
            font-size: 11px;
        }

        hr {
            border: solid gray 0.5px;
        }
    </style>
    <script src="js/jquery-1.9.1.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/bootstrap-table.js"></script>
    <script src="js/bootstrap-select.min.js"></script>
    <script src="js/defaults-zh_CN.min.js"></script>
    <script src="js/d3.v3.min.js" charset="utf-8"></script>
    <script type="text/javascript">

        var array = [];
        $.getJSON("json/ycsb_data.json", "", function (data) {
            //each循环 使用$.each方法遍历返回的数据date
            array = data;
            for (let item of array) {
                item['instance'] = "ecs." + item['Name'].split(" ")[0];
                item['workload'] = item['Name'].split(" ")[2];
                item['database'] = item['Name'].split(" ")[3];
            }
            $(function () {
                $('#table').bootstrapTable({
                    //请求方法
                    method: 'get',
                    //是否显示行间隔色
                    striped: true,
                    //是否使用缓存，默认为true，所以一般情况下需要设置一下这个属性（*）     
                    cache: false,
                    //是否显示分页（*）  
                    pagination: true,
                    //是否启用排序  
                    sortable: true,
                    //排序方式 
                    sortOrder: "asc",
                    //初始化加载第一页，默认第一页
                    //我设置了这一项，但是貌似没起作用，而且我这默认是0,- -
                    //pageNumber:1,   
                    //每页的记录行数（*）   
                    pageSize: 25,
                    //可供选择的每页的行数（*）    
                    pageList: [10, 25, 50, 100],
                    //这个接口需要处理bootstrap table传递的固定参数,并返回特定格式的json数据  
                    data: array,
                    //默认值为 'limit',传给服务端的参数为：limit, offset, search, sort, order Else
                    //queryParamsType:'',   
                    ////查询参数,每次调用是会带上这个参数，可自定义                         
                    /*                queryParams: queryParams : function(params) {
                                        var subcompany = $('#subcompany option:selected').val();
                                        var name = $('#name').val();
                                        return {
                                              pageNumber: params.offset+1,
                                              pageSize: params.limit,
                                              companyId:subcompany,
                                              name:name
                                            };
                                    },*/
                    //分页方式：client客户端分页，server服务端分页（*）
                    sidePagination: "client",
                    //是否显示搜索
                    search: true,
                    //Enable the strict search.    
                    strictSearch: true,
                    //Indicate which field is an identity field.
                    idField: "id",
                    columns: [
                        { title: 'id', field: 'id', visible: false, align: 'center', valign: 'middle' },
                        { title: '实例规格', field: 'instance', align: 'center', valign: 'middle' },
                        { title: '工作负载', field: 'workload', align: 'center', valign: 'middle' },
                        { title: '数据库', field: 'database', align: 'center', valign: 'middle' },
                        { title: '运行时间(ms)', field: 'Time(ms)', align: 'center', valign: 'middle', sortable: true },
                        { title: 'Cpu user time(%)', field: 'Cpu user time(%)', align: 'center', valign: 'middle', sortable: true },
                        { title: 'Cpu system time(%)', field: 'Cpu system time(%)', align: 'center', valign: 'middle', sortable: true },
                        { title: 'Cpu idle time(%)', field: 'Cpu idle time(%)', align: 'center', valign: 'middle', sortable: true },
                        { title: 'Cpu iowait time(%)', field: 'Cpu iowait time(%)', align: 'center', valign: 'middle', sortable: true },
                        { title: 'Disk used percent(%)', field: 'Disk used percent(%)', align: 'center', valign: 'middle', sortable: true },
                        { title: 'Active memory', field: 'Active memory', align: 'center', valign: 'middle', sortable: true },
                        { title: 'Available memory', field: 'Available memory', align: 'center', valign: 'middle', sortable: true },
                        { title: 'Buffered memory', field: 'Buffered memory', align: 'center', valign: 'middle', sortable: true },
                        { title: 'Cached memory', field: 'Cached memory', align: 'center', valign: 'middle', sortable: true },
                        { title: 'Shared memory', field: 'Shared memory', align: 'center', valign: 'middle', sortable: true },
                        { title: 'Load1', field: 'Load1', align: 'center', valign: 'middle', sortable: true },
                        { title: 'Load15', field: 'Load15', align: 'center', valign: 'middle', sortable: true },
                        { title: 'Load5', field: 'Load5', align: 'center', valign: 'middle', sortable: true },
                        { title: 'Processed_forked', field: 'Processed_forked', align: 'center', valign: 'middle', sortable: true },
                        { title: 'CInterrupts', field: 'Interrupts', align: 'center', valign: 'middle', sortable: true },
                        { title: 'Total threads', field: 'Total threads', align: 'center', valign: 'middle', sortable: true },
                        { title: 'Blocked threads', field: 'Blocked threads', align: 'center', valign: 'middle', sortable: true },
                        { title: 'Running threads', field: 'Running threads', align: 'center', valign: 'middle', sortable: true },
                        { title: 'Sleeping threads', field: 'Sleeping threads', align: 'center', valign: 'middle', sortable: true },
                        { title: 'Stopped threads', field: 'Stopped threads', align: 'center', valign: 'middle', sortable: true }],
                    pagination: true,
                    toolbar: "#toolbar",
                    onEditableSave: function (field, row, oldValue, $el) {
                        $.ajax({
                            type: "post",
                            url: "/Editable/Edit",
                            data: { strJson: JSON.stringify(row) },
                            success: function (data, status) {
                                if (status == "success") {
                                    alert("编辑成功");
                                }
                            },
                            error: function () {
                                alert("Error");
                            },
                            complete: function () {

                            }

                        });
                    },
                    showHeader: true,
                    showRefresh: true,
                    showFooter: false,
                    showToggle: true,
                    showColumns: true,
                    iconsPrefix: 'glyphicon',
                    icons: {
                        paginationSwitchDown: 'glyphicon-collapse-down icon-chevron-down',
                        paginationSwitchUp: 'glyphicon-collapse-up icon-chevron-up',
                        refresh: 'glyphicon-refresh icon-refresh',
                        toggle: 'glyphicon-list-alt icon-list-alt',
                        columns: 'glyphicon-th icon-th',
                        detailOpen: 'glyphicon-plus icon-plus',
                        detailClose: 'glyphicon-minus icon-minus'
                    }
                });
            });
        });


    </script>
</head>

<body>
    <!-- 导航 -->
    <div class="navbar navbar-fixed-top">
        <div class="container">
            <!-- Collapsed navigation -->
            <div class="navbar-header">
                <!-- Expander button -->
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <!-- Main title -->
                <a class="navbar-brand" href="meter.html">云服务评分</a>
            </div>
            <!-- Expanded navigation -->
            <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                    <li class="active">
                        <a href="index.html">Home</a>
                    </li>
                    <li class="dropdown">
                        <a href="scorerule.html">评分规则</a>
                    </li>
                    <li>
                        <a data-toggle="modal" data-target="#addModal">评测云服务性能</a>
                    </li>
                    <li>
                        <a data-toggle="modal" data-target="#addModal2">机器学习推荐</a>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">About <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li>
                                <a href="#">Contact</a>
                            </li>
                            <li>
                                <a href="#">Contributing</a>
                            </li>
                            <li>
                                <a href="#">Team</a>
                            </li>
                        </ul>
                    </li>
                </ul>
                <!-- Search, Navigation and Repo links -->
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="#" data-toggle="modal" data-target="#">
                            <i class="fa fa-search"></i> Search
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <i class="fa fa-github"></i>
                            GitHub
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <div class="container-fluid">
        <div class="jumbotron">
            <div class="container">
                <h1>云服务推荐</h1>
                <p>针对您的需求推荐最适合的云服务器。</p>
                <p><a class="btn btn-primary btn-lg" role="button">
                        学习更多</a>
                </p>
            </div>
        </div>
    </div>

    <div class="container">
        <h2>YCSB评测结果</h2>
        <div class="selectors">
            <div class="axis_selector">
                <span style="margin-left: 10px">选择系统评测指标（y轴）：</span>
                <select id="y_axis">
                    <!--下拉栏组件，用于选择 x 轴-->
                    <option value="Time(ms)" selected="selected">Time(ms)</option>
                    <!--selected 表示默认 x 轴为Sepal Length-->
                    <option value="Cpu user time(%)">Cpu user time(%)</option>
                    <option value="Cpu system time(%)">Cpu system time(%)</option>
                    <option value="Cpu idle time(%)">Cpu idle time(%)</option>
                    <option value="Cpu iowait time(%)">Cpu iowait time(%)</option>
                    <option value="Disk used percent(%)">Disk used percent(%)</option>
                    <option value="Active memory">Active memory</option>
                    <option value="Available memory">Available memory</option>
                    <option value="Buffered memory">Buffered memory</option>
                    <option value="Cached memory">Cached memory</option>
                    <option value="Shared memory">Shared memory</option>
                    <option value="Load1">Load1</option>
                    <option value="Load15">Load15</option>
                    <option value="Load5">Load5</option>
                    <option value="Processed_forked">Processed_forked</option>
                    <option value="Interrupts">Interrupts</option>
                    <option value="Total threads">Total threads</option>
                    <option value="Blocked threads">Blocked threads</option>
                    <option value="Running threads">Running threads</option>
                    <option value="Sleeping threads">Sleeping threads</option>
                    <option value="Stopped threads">Stopped threads</option>
                </select>
            </div>
            <div class="axis_selector">
                <span style="margin-left: 10px; margin-right: 75px">选择workload：</span>
                <select id="wl_axis">
                    <!--下拉栏组件，用于选择 x 轴-->
                    <option value="workloada" selected="selected">workloada</option>
                    <!--selected 表示默认 x 轴为Sepal Length-->
                    <option value="workloadb">workloadb</option>
                    <option value="workloadc">workloadc</option>
                    <option value="workloadd">workloadd</option>
                    <option value="workloade">workloade</option>
                    <option value="workloadf">workloadf</option>
                </select>
            </div>
            <div class="axis_selector">
                <span style="margin-left: 10px; margin-right: 91px"> 选择数据库：</span>
                <select id="db_axis">
                    <!--下拉栏组件，用于选择 x 轴-->
                    <option value="hbase" selected="hbase">hbase</option>
                    <!--selected 表示默认 x 轴为Sepal Length-->
                    <option value="mongodb">mongodb</option>
                    <option value="cassandra">cassandra</option>
                    <option value="redis">redis</option>
                </select>
            </div>
        </div>
        <div id="mySVG"></div>
        <script src="js/dot.js"></script>
        <div>注：x轴从1到24分别对应g5.large, g5.xlarge, g5.2xlarge, g5.3xlarge, c5.large, c5.xlarge, c5.2xlarge, c5.3xlarge,
            r5.large, c5.xlarge, c5.2xlarge, c5.3xlarge, d1ne.2xlarge,<br />
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;i2g.2xlarge, i2.xlarge, i2.2xlarge, hfg5.large, hfg5.xlarge,
            hfg5.2xlarge, hfg5.3xlarge, hfc5.large, hfc5.xlarge, hfc5.2xlarge, hfc5.3xlarge</div>
        <div id="toolbar">
            <span style="font-size: 30px; margin-left: 10px">全部结果</span>
        </div>
        <table id="table" style="margin-top: 10px">

        </table>
    </div>

    <!-- 尾部 -->
    <footer>

    </footer>
    <!--modal-->
    <div class="modal fade" id="addModal" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                        ×
                    </button>
                    <h4 class="modal-title" id="myModalLabel">评测云服务器性能</h4>
                </div>
                <div class="modal-body">
                    <form role="form" action="javascript:void(0)">
                        <span style="margin-left: 20px">云服务厂商：</span>
                        <select id="supplier" class="selectpicker">
                            <option value="aliyun">阿里云</option>
                            <option value="tencent">腾讯云</option>
                            <option value="baidu">百度云</option>
                            <option value="aws">AWS</option>
                            <option value="azure">Azure</option>
                            <option value="googlecloud">Google Cloud</option>
                        </select>
                        <br />
                        <span style="margin-left: 20px; margin-right: 13px">实例规格：</span>
                        <select id="kind" class="selectpicker" data-size="6">
                            <option value="ecs.g5.large">ecs.g5.large</option>
                            <option value="ecs.g5.xlarge">ecs.g5.xlarge</option>
                            <option value="ecs.g5.2xlarge">ecs.g5.2xlarge</option>
                            <option value="ecs.g5.3xlarge">ecs.g5.3xlarge</option>
                            <option value="ecs.c5.large">ecs.c5.large</option>
                            <option value="ecs.c5.xlarge">ecs.c5.xlarge</option>
                            <option value="ecs.c5.2xlarge">ecs.c5.2xlarge</option>
                            <option value="ecs.c5.3xlarge">ecs.c5.3xlarge</option>
                            <option value="ecs.r5.large">ecs.r5.large</option>
                            <option value="ecs.r5.xlarge">ecs.r5.xlarge</option>
                            <option value="ecs.r5.2xlarge">ecs.r5.2xlarge</option>
                            <option value="ecs.r5.3xlarge">ecs.r5.3xlarge</option>
                            <option value="ecs.d1ne.2xlarge">ecs.d1ne.2xlarge</option>
                            <option value="ecs.i2g.2xlarge">ecs.i2g.2xlarge</option>
                            <option value="ecs.i2.xlarge">ecs.i2.xlarge</option>
                            <option value="ecs.i2.2xlarge">ecs.i2.2xlarge</option>
                            <option value="ecs.hfg5.large">ecs.hfg5.large</option>
                            <option value="ecs.hfg5.xlarge">ecs.hfg5.xlarge</option>
                            <option value="ecs.hfg5.2xlarge">ecs.hfg5.2xlarge</option>
                            <option value="ecs.hfg5.3xlarge">ecs.hfg5.3xlarge</option>
                            <option value="ecs.hfc5.large">ecs.hfc5.large</option>
                            <option value="ecs.hfc5.xlarge">ecs.hfc5.xlarge</option>
                            <option value="ecs.hfc5.2xlarge">ecs.hfc5.2xlarge</option>
                            <option value="ecs.hfc5.3xlarge">ecs.hfc5.3xlarge</option>
                        </select>
                        <br />
                        <span style="margin-left: 20px; margin-right: 13px">评测程序：</span>
                        <select id="supplier" class="selectpicker">
                            <option value="1">ycsb</option>
                            <option value="2">squash compression benchmark</option>
                            <option value="3">sysbench</option>
                            <option value="4">native json benchmark</option>
                            <option value="5">自定义评测程序</option>
                        </select>
                        <br />
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                <h4 class="panel-title">
                                    <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne">
                                        自定义评测程序
                                    </a>
                                </h4>
                            </div>
                            <div id="collapseOne" class="panel-collapse collapse in">
                                <div class="panel-body">

                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
                    <button type="button" class="btn btn-primary" data-dismiss="modal" id="addRecord"
                        onclick="alert('请在我的评测中查看结果'); ">提交</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="addModal2" tabindex="-1" role="dialog" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                            ×
                        </button>
                        <h4 class="modal-title" id="myModalLabel">机器学习推荐</h4>
                    </div>
                    <div class="modal-body">
                        <form role="form" action="javascript:void(0)">
                            <span style="margin-left: 20px">任务程序：</span>
                            <input id="file" type="file" class="form-control"
                                style="width: 220px; display: inline-block; margin-top: 10px; margin-bottom: 10px">
                            <br />
                            <span style="margin-left: 20px; margin-right: 13px">执行命令：</span>
                            <input id="command" type="text" class="form-control"
                                style="width: 220px; display: inline-block; margin-top: 10px; margin-bottom: 10px">
                            <br />
                            <span style="margin-left: 20px; margin-right: 13px">实例规格：</span>
                            <select id="kind" class="selectpicker" data-size="6" multiple data-actions-box="true">
                                <option value="ecs.g5.large">ecs.g5.large</option>
                                <option value="ecs.g5.xlarge">ecs.g5.xlarge</option>
                                <option value="ecs.g5.2xlarge">ecs.g5.2xlarge</option>
                                <option value="ecs.g5.3xlarge">ecs.g5.3xlarge</option>
                                <option value="ecs.c5.large">ecs.c5.large</option>
                                <option value="ecs.c5.xlarge">ecs.c5.xlarge</option>
                                <option value="ecs.c5.2xlarge">ecs.c5.2xlarge</option>
                                <option value="ecs.c5.3xlarge">ecs.c5.3xlarge</option>
                                <option value="ecs.r5.large">ecs.r5.large</option>
                                <option value="ecs.r5.xlarge">ecs.r5.xlarge</option>
                                <option value="ecs.r5.2xlarge">ecs.r5.2xlarge</option>
                                <option value="ecs.r5.3xlarge">ecs.r5.3xlarge</option>
                                <option value="ecs.d1ne.2xlarge">ecs.d1ne.2xlarge</option>
                                <option value="ecs.i2g.2xlarge">ecs.i2g.2xlarge</option>
                                <option value="ecs.i2.xlarge">ecs.i2.xlarge</option>
                                <option value="ecs.i2.2xlarge">ecs.i2.2xlarge</option>
                                <option value="ecs.hfg5.large">ecs.hfg5.large</option>
                                <option value="ecs.hfg5.xlarge">ecs.hfg5.xlarge</option>
                                <option value="ecs.hfg5.2xlarge">ecs.hfg5.2xlarge</option>
                                <option value="ecs.hfg5.3xlarge">ecs.hfg5.3xlarge</option>
                                <option value="ecs.hfc5.large">ecs.hfc5.large</option>
                                <option value="ecs.hfc5.xlarge">ecs.hfc5.xlarge</option>
                                <option value="ecs.hfc5.2xlarge">ecs.hfc5.2xlarge</option>
                                <option value="ecs.hfc5.3xlarge">ecs.hfc5.3xlarge</option>
                            </select>
                            <br />
                            <span style="margin-left: 20px; margin-right: 13px">性能成本目标：</span>
                            <select id="supplier" class="selectpicker">
                                <option value="1">性能最好</option>
                                <option value="2">成本最低</option>
                                <option value="3">其他</option>
                            </select>
                            <br />
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
                        <button type="button" class="btn btn-primary" data-dismiss="modal" id="addRecord"
                            onclick="alert('请在我的评测中查看结果'); ">提交</button>
                    </div>
                </div>
            </div>
        </div>

    <footer style="margin-bottom: 5px;">
        <hr>
        <center>&#169; Unias Team, SEI, PKU</center>
        <center>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</center>
    </footer>
</body>

</html>